![CircleCI](https://img.shields.io/circleci/build/gh/ademilsonfp/parse-tibia-analyser)
![Codecov](https://img.shields.io/codecov/c/gh/ademilsonfp/parse-tibia-analyser)
![npm](https://img.shields.io/npm/v/parse-tibia-analyser)
![GitHub](https://img.shields.io/github/license/ademilsonfp/parse-tibia-analyser)

## Description

Parse text reports from game [Tibia] generated by _Copy to clipboard_ button
in some dialogs of _[Analytics Selector]_.

### Supported game contents

- _Hunting Session Analyser_
- _Party Hunt Analyser_

### Features

- Customizable type parsers
- Supports _Unix_, _DOS_ and old _Mac_ line breaks
- Tabular indentations but also two, four and eight spaces are supported
- Consistent syntax, names, line breaks and indentations
- TypeScript definitions

## Usage

You can install this using your preferred [npm] package manager:

```console
npm install --save parse-tibia-analyser
```

Parsing any supported game content:

```ts
import parseGameAnalyser from 'parse-tibia-analyser';

// replace ... with copied game content:
const myHunt = parseGameAnalyser('...');
console.log(myHunt); 
```

Only specific contents:

```ts
import {
  parseHuntingSession,
  parsePartyHunt
} from 'parse-tibia-analyser';

// Hunting Sesion Analyser:
const myHuntingSession = parseHuntingSession('...');
console.log(myHuntingSession);

// Party Hunt Analyser:
const myPartyHunt = parsePartyHunt('...');
console.log(myPartyHunt);
```

Customizing type parsers:

```ts
parseGameAnalyser('...', {
  dateTime(value) {
    return new Date(value);
  },

  // ...
});

parseHuntingSession('...', {
  integer(value) {
    return value.replace(',', '.')
  },

  // ...
});

parsePartyHunt('...', {
  lootType(value) {
    return value.charAt(0);
  },

  boolean(value) {
    return value ? 1 : 0;
  },

  // ...
})
```

## Development

### Dependencies

Installing dependencies:

```bash
$ yarn install
```

### Tests

Running tests continuously as source code changes:

```bash
# watch mode
$ yarn run dev
```

Running tests at only once:

```bash
$ yarn run test
```

Generating code coverage report (Istanbul):

```bash
$ yarn run coverage
```

### Documentation

Generating HTML reference documentation (TypeDoc):

```bash
$ yarn run docs
```

## License

[MIT]

Copyright (c) 2020, Ademilson Ferreira Pinto

[npm]: https://www.npmjs.com/
[Tibia]: https://www.tibia.com/news/
[Analytics Selector]: https://www.tibia.com/gameguides/?subtopic=manual&section=interface#analyticsselector
[Discord]: https://discord.com/
[download demo-app]: https://github.com/ademilsonfp/parse-tibia-analyser/releases/tag/v1.0.3
[MIT]: https://opensource.org/licenses/MIT
